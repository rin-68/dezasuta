<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdetaKaori's Portfolio</title>
    <link href="
    https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css
    " rel="stylesheet">

    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/works_hp_detail.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- CDN gsap 横から縦スクロール -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

    <script>
        (function (d) {
            var config = {
                kitId: 'ayw6ybt',
                scriptTimeout: 3000,
                async: true
            },
                h = d.documentElement, t = setTimeout(function () { h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive"; }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a; h.className += " wf-loading"; tk.src = 'https://use.typekit.net/' + config.kitId + '.js'; tk.async = true; tk.onload = tk.onreadystatechange = function () { a = this.readyState; if (f || a && a != "complete" && a != "loaded") return; f = true; clearTimeout(t); try { Typekit.load(config) } catch (e) { } }; s.parentNode.insertBefore(tk, s)
        })(document);
    </script>
</head>

<body>
    <header>
        <div class="header">
            <div class="wrapper">
                <nav class="pc_nav">
                    <li>
                        <ul class="en"><a href="./index.html">TOP</a></ul>
                        <ul class="en"><a href="./about.html">ABOUT ME</a></ul>
                        <ul class="en"><a href="./index.html">CONTACT</a></ul>
                    </li>
                    <div class="line"></div>

                    <li>
                        <ul class="en here"><a href="./works_hp.html">HP</a></ul>
                        <ul class="en"><a href="./works_lp.html">LP</a></ul>
                        <ul class="en"><a href="./works_bn.html">BANNER</a></ul>
                        <ul class="en">WORKS</ul>
                    </li>
                </nav>
            </div>
            <div class="sp_btn"><span></span></div>
            <div class="sp_menu">
                <div>
                    <div class="menu_portfolioname">
                        <p class="en">THANKS TO COMING. THIS IS THE <span>IDETA KAORI’S PORTFORIO</span>.</p>
                    </div>
                    <div class="content">
                        <nav class="sp_nav">
                            <li>
                                <ul class="en"><a href="./index.html">TOP</a></ul>
                                <ul class="en"><a href="./about.html">ABOUT ME</a></ul>
                                <ul class="en"><a href="./works_hp.html">HP<span>WORKS</span></a></ul>
                                <ul class="en"><a href="./works_lp.html">LP<span>WORKS</span></a></ul>
                                <ul class="en"><a href="./works_bn.html">BANNER<span>WORKS</span></a></ul>
                                <ul class="en"><a href="./index.html">CONTACT</a></ul>
                            </li>
                        </nav>
                        <div class="triangle_top"></div>
                        <div class="triangle_bottom"></div>

                    </div>
                </div>
            </div>

        </div>
    </header>

    <div class="top_portfolioname">
        <p class="en">THANKS TO COMING. THIS IS THE <span>IDETA KAORI’S PORTFORIO</span>.</p>
    </div>
    <div class="bg"></div>
    <main data-scroll-container>
        <section data-scroll-section class="scroll_section">
            <div class="pc_top wrapper section-inner">
                <div class="container">
                    <div class="ttl">
                        <h1>カフェサイト（架空）</h1>
                        <p>HP</p>
                    </div>
                    <div class="img">
                        <div class="img_pc"> <img src="./images/hp_cafe_1.png">
                        </div>
                        <div class="img_sp"> <img src="./images/works_lp_00.png">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section data-scroll-section class="scroll_section second_section">
            <div class="sp_container section-inner">
                <div class="inner">
                    <div class="sp_top">
                        <div class="container">
                            <div class="page_ttl">
                                <p class="en">WORKS</p>
                                <p class="en">HP</p>
                            </div>
                            <div class="img">
                                <div class="img_pc"> <img src="./images/hp_cafe_1.png">
                                </div>
                                <div class="img_sp"> <img src="./images/works_lp_00.png">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="contents wrapper bottom-txt">
                        <div class="sp_ttl">
                            <h1>カフェサイト（架空）</h1>
                        </div>

                        <div class="list_left">
                            <div class="list_row">
                                <ul>
                                    <li class="list_ttl">制作期間</li>
                                    <li class="list_txt">２日</li>
                                </ul>
                            </div>

                            <div class="list_row">
                                <ul>
                                    <li class="list_ttl">担当範囲</li>
                                    <li class="list_txt">Webデザイン、コーディング（HTML・CSS）</li>
                                </ul>
                            </div>

                            <div class="list_row">
                                <ul>
                                    <li class="list_ttl">使用ツール</li>
                                    <li class="list_txt">Adobe Illustrator・Adobe photoshop</li>
                                </ul>
                            </div>


                            <div class="list_row">
                                <ul>
                                    <li class="list_ttl">ターゲット</li>
                                    <li class="list_txt">50〜60代の女性</li>
                                </ul>
                            </div>


                            <div class="list_row">
                                <ul>
                                    <li class="list_ttl">コンセプト</li>
                                    <li class="list_txt">ナチュラル、おしゃれ</li>
                                </ul>
                            </div>

                            <div class="list_row">
                                <ul>
                                    <li class="list_ttl">目的・課題</li>
                                    <li class="list_txt">ー</li>
                                </ul>
                            </div>


                        </div>
                        <div class="point">
                            <h2>制作ポイント</h2>
                            <p>訴求ポイントは「簡単」に作ることができるところ。<br>
                                「簡単」というだけでは消費者に正しく伝わらないため、具体的に「水・肉・トマト缶だけ」という文言を目立たせ、パッと見ただけでもイメージが湧きやすいように料理画像も併用した。
                                <br><br>
                                またターゲット層に合わせて、最低限の文字数とし、視認性に配慮した。
                            </p>
                            <p>訴求ポイントは「簡単」に作ることができるところ。<br>
                                「簡単」というだけでは消費者に正しく伝わらないため、具体的に「水・肉・トマト缶だけ」という文言を目立たせ、パッと見ただけでもイメージが湧きやすいように料理画像も併用した。
                                <br><br>
                                またターゲット層に合わせて、最低限の文字数とし、視認性に配慮した。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section data-scroll-section class="scroll_section">
            <div class="pc_all section-inner">
                <div class="allpage">
                    <p class="en">ALL PAGES</p>
                    <div class="a">
                        <img src="./images/hp_cafe_2.jpg" alt="">
                    </div>
                    <div>
                        <img src="./images/hp_cafe_3.jpg" alt="">
                    </div>
                    <div class="a">
                        <img src="./images/hp_cafe_4.jpg" alt="">
                    </div>
                    <div>
                        <img src="./images/hp_cafe_5.jpg" alt="">
                    </div>
                    <div>
                        <img src="./images/hp_cafe_6.jpg" alt="">
                    </div>
                    <div>
                        <img src="./images/hp_cafe_7.jpg" alt="">
                    </div>
                    <div class="txt_wrapper">
                        <p class="en">RESPONSIVE</p>
                    </div>
                    <div>
                        <img src="./images/hp_cafe_8.jpg" alt="">
                    </div>
                    <div>
                        <img src="./images/hp_cafe_9.jpg" alt="">
                    </div>
                    <div>
                        <img src="./images/hp_cafe_10.jpg" alt="">
                    </div>

                </div>
                <div class="wrapper">
                    <a href="">
                        <div class="btn">
                            <p class="en">CONTACT</p>
                            <img src="./images/mail.svg">
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <section data-scroll-section class="scroll_section forth_section verticalscrolling">
            <div class="sp_all sliders_wrapper section-inner">
                <div class="sp_allpage">
                    <p class="en slide">ALL PAGES</p>
                    <div class="images_top slide">
                        <img src="./images/hp_cafe_all_1.jpg" alt="">
                    </div>
                    <div class="images slide">
                        <div class="images_left">
                            <div>
                                <img src="./images/hp_cafe_all_2.jpg" alt="">
                            </div>
                            <div>
                                <img src="./images/hp_cafe_all_3.jpg" alt="">
                            </div>
                        </div>
                        <div class="images_right">
                            <div>
                                <img src="./images/hp_cafe_all_4.jpg" alt="">
                            </div>
                            <div>
                                <img src="./images/hp_cafe_all_5.jpg" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="wrapper slide">
                        <a href="">
                            <div class="btn">
                                <p class="en">CONTACT</p>
                                <img src="./images/mail.svg">
                            </div>
                        </a>
                    </div>
                </div>

            </div>
        </section>

    </main>


    <script src="
    https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js
    "></script>
    <script>
        (() => {
            document.addEventListener('DOMContentLoaded', () => {
                // 下一文追加
                gsap.registerPlugin(ScrollTrigger);

                const scroll = new LocomotiveScroll({
                    el: document.querySelector('[data-scroll-container]'),
                    direction: 'horizontal',
                    smooth: true,
                    tablet: {
                        direction: 'horizontal',
                        smooth: true,

                    },
                    smartphone: {
                        direction: 'horizontal',
                        smooth: true,

                    }

                })

                // ここから追加

                scroll.on("scroll", ScrollTrigger.update);//  scrollがスクロールされた時にスクロールトリガーと更新する（スクロール位置に基づいてアニメーションを更新する）

                ScrollTrigger.scrollerProxy('[data-scroll-container]', {//  スクロールトリガーで以下のプロキシを使用する（scrollがonになるとLocomotivescrollがスクロール制御し、elで指定した部分で調整を行うので、そのプロキシをスクロールトリガーでも使用する
                    scrollLeft(value) {//  要素の1番左からのスクロール位置(value)を取得する
                        return arguments.length ? scroll.scrollTo(value, 0, 0) : scroll.scroll.instance.scroll.x;//  argument.lengthがtrue(1以上で「ある」)場合、スクロール位置を設定、false(0で「ない」)場合、現在のスクロール位置を取得する
                    },
                    getBoundingClientRect() {
                        return { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight }
                    },
                    pinType: document.querySelector('[data-scroll-container]').style.transform ? "transform" : "fixed"
                })


                const sections = gsap.utils.toArray('section')//  全てのsection要素を配列に変換してsectionsに代入する

                sections.forEach(function (section) {//  配列内の各section要素に対して以下の処理を行う

                    const inner = section.classList.contains('.second_section') ? section.querySelector('.bottom-txt') : section.querySelector('.section-inner');
                    //.second_section(固定要素のあるセクションのクラス名)を持つセクションの場合.bottom-txt(固定要素のセクション内のスクロール部分のクラス名)を、持たない場合は.section-innerを「inner」に代入する
                    if (!Section.classList.contains('verticalscrolling')) {//  垂直方向スクロールでない(水平＝横スクロール)セクションの場合

                        scrollTrigger.create({//スクロールトリガーを作成する

                            scroller: '[data-scroll-container]',//スクロールコンテナとして全体を指定する
                            trigger: section,//トリガー要素としてセクションを指定する
                            start: section.scrollWidth <= window.innerWidth ? 'top top' : 'bottom bottom',//ウインドウ幅よりセクション幅が小さいときは左端を、セクション幅が大きい時ははみ出るので右端を開始地点とする
                            // start: 'top top',
                            end: '+=100%',//  セクション開始位置から100％分のスクロール距離
                            pin: inner,//.section-innerを代入する
                            pinSpacing: false,
                            pinType: 'transform'
                        })

                    } else {//  垂直方向スクロールセクションの場合（＝section自体は横スクロールで、その中のコンテンツsp_allpageのみ縦スクロール）
                        const verticalscroll = section.querySelector('sp_allpage');

                        scrollTrigger.create({

                            scroller: '[data-scroll-container]',
                            trigger: section,
                            direction: vertical,
                            start: 'center center',
                            end: () => `+=${section.scrollHight + window.innerWidth}`,
                            pin: inner,//.section-innerを代入する
                            pinSpacing: true,
                            pinType: 'transform',
                            anticipatePin: 1
                        })

                        gsap.to(verticalscroll, {

                            y: () => `${-(section.scrollHight - document.documentElement.clientHeigth)}px`,

                            ease: 'none',

                            scrollTrigger: {

                                trigger: verticalscroll,
                                scroller: '[data-scroll-container]',
                                start: 'center center',
                                // start: 'top top',
                                end: () => `+=${section.scrollHeight}`,
                                // end: () => "+=" + document.querySelector(".data-scroll-section").offsetHeight,
                                scurub: true
                            }
                        });
                    }
                })
                const timeline = gsap.timeline({

                    scrollTrigger: {

                        trigger: '.sp_top .img',//固定するもの
                        scroller: '[data-scroll-container]',
                        scrub: true,
                        start: '50% 50%',
                        // start: 'top top',// セクションのtop(1つ目、セクションの上から50pxだとtop=+50になる)がウインドウのtop(2つ目)に来た時
                        endTrigger: '.second_section .section-inner',
                        end: 'bottom bottom',
                        anticipatePin: 1,
                        pin: true,
                        pinSpacing: false,
                        pinType: 'transform'
                    }
                });

                ScrollTrigger.addEventListener("refresh", () => Scroll.update());

                ScrollTrigger.refresh();




                const bg = document.querySelector('.bg')
                const secondSection = document.querySelector('.second_section')
                const secondSectionX = secondSection.getBoundingClientRect().x
                // console.log(secondSectionX)
                scroll.on('scroll', function (event) {
                    const scrollX = event.scroll.x
                    // console.log(scrollX)
                    if (scrollX <= secondSectionX) {
                        const opacity = 1 - (scrollX / secondSectionX)
                        bg.style.opacity = opacity
                    }
                })


                const container = document.querySelector('.forth_section')
                const slides = document.querySelectorAll('.slide')
                const containerHeight = container.offsetHeight;
                gsap.to(slides, {
                    yPercent: -110 * (slides.length - 1),
                    ease: "none",
                    scrollTrigger: {
                        // start: 'top top'
                        trigger: container,
                        pin: true,
                        scurub: 1,
                        end: () => '+= ${ containerHeight }',
                        anticipatePin: 1,
                        invalidateOnRefresh: true
                    }
                })
            })
        })()

    </script>
    <script>
        $(function () {
            $('.sp_btn').on('click', function () {
                $('.sp_menu').fadeToggle();
                $('.sp_btn').toggleClass('open');
            })
        });


    </script>
    <script>
        $(function () {
            if (window.matchMedia("(max-width: 768px)").matches) {


                $('sp_container').toggleClass('active');
                $('.contents').toggleClass('wrapper');
                $('inner').toggleClass('wrapper');
            }
        });
    </script>



</body>

</html>